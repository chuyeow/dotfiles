# ~/.bashrc

# Environment variables
export GOPATH=~/go
export LC_ALL=en_US.UTF-8

# PATH configuration
export PATH="$GOPATH/bin:/usr/local/go/bin:/opt/homebrew/bin:~/bin:$PATH"
export PATH="/opt/homebrew/bin:~/bin:$PATH"
export PATH="$HOME/.volta/bin:$PATH"
export PATH="$HOME/.antigravity/antigravity/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"

# Git aliases
alias gca='git commit -a'
alias gcv='git commit -v'
alias gpr='git pull --rebase'
alias gp='git push'
alias gb='git branch'
alias gcm='git checkout main'
alias gco='git checkout'
alias gst='git status --branch'
alias gl="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative"

# Replace ls with eza https://github.com/eza-community/eza
alias ls='eza'

# ssh identity management
alias ssh-add-wego='ssh-add -D && ssh-add ~/.ssh/id_ed25519_github_wego'
alias ssh-add-personal='ssh-add -D && ssh-add ~/.ssh/id_ed25519'

# Other aliases
alias k='kubectl'
alias cc='claude --chrome'
alias ccres='claude --resume'
alias ccp='claude --append-system-prompt "$(cat ~/.claude/auto-plan-mode.md)"'
alias ccdanger='claude --dangerously-skip-permissions'
alias cctrace='claude-trace --include-all-requests'

# Load bash completion if available
if [[ -f /opt/homebrew/etc/profile.d/bash_completion.sh ]]; then
    source /opt/homebrew/etc/profile.d/bash_completion.sh
elif [[ -f /usr/local/etc/profile.d/bash_completion.sh ]]; then
    source /usr/local/etc/profile   .d/bash_completion.sh
elif [[ -f /etc/bash_completion ]]; then
    source /etc/bash_completion
fi

# Enable history appending instead of overwriting
shopt -s histappend

# Set history size
HISTSIZE=1000
HISTFILESIZE=2000

# Don't put duplicate lines or lines starting with space in the history
HISTCONTROL=ignoreboth

# Check window size after each command and update LINES and COLUMNS
shopt -s checkwinsize

# Enable globstar (recursive globbing with **)
shopt -s globstar 2>/dev/null

# Make less more friendly for non-text input files
[[ -x /usr/bin/lesspipe ]] && eval "$(SHELL=/bin/sh lesspipe)"

# Git branch function for PS1
git_branch() {
    git branch 2>/dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
}

# Custom PS1 with current directory and git branch
export PS1='\[\033[0;36m\]\w\[\033[0;33m\]$(git_branch)\[\033[0m\] $ '

# nvm
[ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh" 2>/dev/null || true

# zoxide
eval "$(zoxide init bash)"

# cargo
. "$HOME/.cargo/env"
